(function(e){function t(t){for(var r,i,u=t[0],c=t[1],l=t[2],f=0,d=[];f<u.length;f++)i=u[f],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);s&&s(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={register:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var s=c;a.push([4,"chunk-vendors"]),n()})({"00b0":function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("let-select",{ref:"localSelect",attrs:{clearable:!1,size:"small"},on:{change:e.changeLocale},model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},[e._l(e.localeMessages,(function(t){return[n("let-option",{attrs:{value:t.localeCode}},[e._v(e._s(t.localeName))])]}))],2)],1)},o=[],a=n("f51c"),i={data:function(){return{locale:this.$cookie.get("locale")||"cn",localeMessages:a["c"]}},methods:{changeLocale:function(){this.$cookie.set("locale",this.locale,{expires:"1Y"}),location.reload()}}},u=i,c=n("2877"),l=Object(c["a"])(u,r,o,!1,null,null,null);t["a"]=l.exports},"04b0":function(e,t,n){"use strict";var r=n("a4e9"),o=n.n(r);o.a},"12ce":function(e,t,n){},4:function(e,t,n){e.exports=n("9623")},"42a1":function(e,t,n){"use strict";n("b0c0");var r=n("5530"),o=n("53ca"),a=n("a026"),i=n("1861"),u=n.n(i),c=(n("8c47"),n("00e7")),l=n.n(c),s=(n("6609"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{staticClass:"icon"},[n("use",{attrs:{"xlink:href":"#"+e.name}})])}),f=[],d={name:"Icon",props:{name:{type:String,required:!0}}},p=d,h=(n("e166"),n("2877")),g=Object(h["a"])(p,s,f,!1,null,null,null),b=g.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("let-form-item",{staticClass:"tars-form-item"},[n("label",{staticClass:"let-form-item__label let-label__position_top clickable",on:{click:function(t){return e.$emit("onLabelClick")}}},[e._v(e._s(e.label))]),e._t("default")],2)},m=[],y={name:"TarsFormItem",props:{label:String}},w=y,D=(n("04b0"),Object(h["a"])(w,v,m,!1,null,null,null)),_=D.exports,O=n("0c80"),F=n.n(O),j=n("c400"),k=n.n(j);a["default"].use(u.a,{locale:{en:k.a,cn:F.a}[l.a.get("locale")||"cn"]||F.a}),a["default"].component(b.name,b),a["default"].component(_.name,_);var x=a["default"].prototype.$Loading;function C(e){this.el=e,this.loading=null}C.prototype.show=function(e,t){"object"===Object(o["a"])(e)&&(t=e,e=null),this.loading&&this.hide();var n=this.el,a=x(Object(r["a"])({fullScreen:!n,target:n&&e?n.querySelector(e):n,boxClass:"loading-inner",background:"rgba(0,0,0,0)",color:"#fff",size:24},t));return a.show(),this.loading=a,this},C.prototype.hide=function(){return this.loading&&(this.loading.hide(),this.loading=null),this},C.show=function(){var e;return C._loading||(C._loading=new C),(e=C._loading).show.apply(e,arguments)},C.hide=function(){return C._loading||(C._loading=new C),C._loading.hide()},x.show=C.show,x.hide=C.hide,Object.defineProperty(a["default"].prototype,"$loading",{get:function(){return this._loading||(this._loading=new C(this.$el)),this._loading}}),Object.defineProperty(a["default"].prototype,"$tip",{get:function(){return this.$Notice}})},6609:function(e,t,n){},"7ad2":function(e,t,n){"use strict";n("99af"),n("4160"),n("c975"),n("a15b"),n("13d5"),n("fb6a"),n("b64b"),n("d3b7"),n("ac1f"),n("25f0"),n("5319"),n("1276"),n("159b");var r=n("d4ec"),o=n("bee2"),a=n("53ca"),i=function(e){return"string"===typeof e},u=Array.isArray,c=function(e){return"object"===Object(a["a"])(e)&&null!==e},l=function(e){return"function"===typeof e},s=Object.assign;function f(e){return String(e).replace(/(?:[\0- "-&\+-\}\x7F-\xA8\xAA-\xAD\xAF-\u2121\u2123-\u23E8\u23F0-\u23F2\u23F4-\u23F7\u23FB-\u24C1\u24C3-\u25B5\u25B7-\u25FF\u27C0-\u2933\u2936-\u2B04\u2B08-\u2B1A\u2B1D-\u2B4F\u2B51-\u2B54\u2B56-\u302F\u3031-\u303C\u303E-\u3296\u3298\u329A-\uD7FF\uE000-\uFFFF]|[\uD800-\uD83B\uD83F-\uDBFF][\uDC00-\uDFFF]|\uD83C[\uDC00-\uDC03\uDC05-\uDCCE\uDCD0-\uDD6F\uDD72-\uDD7D\uDD80-\uDD8D\uDD8F\uDD90\uDE52-\uDEFF]|\uD83D[\uDE50-\uDE7F\uDF00-\uDFFF]|\uD83E[\uDC00-\uDCFF\uDE00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~*]/g,(function(e){return"%".concat(e.charCodeAt().toString(16).slice(-2).toUpperCase())}))}function d(e){if(!e)return"";var t=[];return Object.keys(e).forEach((function(n){var r=e[n];null!==r&&void 0!==r||(r=""),t.push("".concat(f(n),"=").concat(f(r)))})),t.join("&").replace(/%20/g,"+")}function p(e){var t=function e(t,n,r){return u(r)||c(r)?(Object.keys(r).forEach((function(o){e(t,"".concat(n,"[").concat(o,"]"),r[o])})),t):(t[n]=r,t)};return d(Object.keys(e).reduce((function(n,r){return t(n,r,e[r])}),{}))}var h=function(){function e(t){Object(r["a"])(this,e),this.defaults=t}return Object(o["a"])(e,[{key:"get",value:function(e){return s({},this.defaults,e)}},{key:"set",value:function(e,t){var n=this;if(e){if(i(e)){var r=e.split(".");r.reduce((function(e,n,o){return o===r.length-1&&(e[n]=t),e[n]}),this.defaults)}c(e)&&Object.keys(e).forEach((function(t){n.set(t,e[t])})),u(e)&&e.forEach((function(e){return n.set(e,t)}))}}},{key:"remove",value:function(e){var t=this;if(e){if(i(e)){var n=e.split(".");n.reduce((function(e,t,r){return r===n.length-1&&delete e[t],e[t]}),this.defaults)}u(e)&&e.forEach((function(e){return t.remove(e)}))}}}]),e}(),g=function(){function e(t){Object(r["a"])(this,e),this.handler=t}return Object(o["a"])(e,[{key:"set",value:function(e){l(e)&&(this.handler=e)}},{key:"exec",value:function(){l(this.handler)&&this.handler.apply(null,arguments)}}]),e}(),b=function(){function e(t){Object(r["a"])(this,e),this.base=t||""}return Object(o["a"])(e,[{key:"set",value:function(e){i(e)&&(this.base=e)}},{key:"get",value:function(e){return this.base+(e||"")}}]),e}(),v=new b,m=new h({credentials:"same-origin",timeout:1e4}),y=new h({"X-Requested-With":"XMLHttpRequest"}),w=new h({}),D=new g,_=new g((function(){return!0}));function O(e,t){var n=d(w.get(t));return n&&(n=-1===e.indexOf("?")?"?".concat(n):"&".concat(n)),e+n}function F(e){var t=e.status;if(t>=200&&t<300||304===t)return e;throw D.exec(t,e),new Error(e.statusText)}function j(e){return e.json().then(null,(function(t){return D.exec(500,e),Promise.reject(t)}))}function k(e){return _.handler(e)?e:Promise.reject(e)}function x(e){return Promise.reject(e)}function C(e,t){var n=m.get({headers:y.get()});return fetch(v.get(O(e,t)),n).then(F).then(j).catch(x)}function $(e,t){var n=m.get({headers:y.get()});return fetch(v.get(O(e,t)),n).then(F).then(j).then(k).catch(x)}function P(e,t){var n=m.get({method:"POST",headers:y.get({"Content-Type":"application/x-www-form-urlencoded"}),body:p(w.get(t))});return fetch(v.get(e),n).then(F).then(j).then(k).catch(x)}function E(e,t){var n=m.get({method:"POST",headers:y.get(),body:t}),r=w.get({});return Object.keys(r).forEach((function(e){t.append(e,r[e])})),fetch(v.get(e),n).then(F).then(j).then(k).catch(x)}function S(e,t){var n=m.get({method:"POST",headers:y.get({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(w.get(t))});return fetch(v.get(e),n).then(F).then(j).then(k).catch(x)}function T(e,t){var n=m.get({method:"PUT",headers:y.get({"Content-Type":"application/x-www-form-urlencoded"}),body:p(w.get(t))});return fetch(v.get(e),n).then(F).then(j).then(k).catch(x)}function B(e,t){var n=m.get({method:"DELETE",headers:y.get()});return fetch(v.get(O(e,t)),n).then(F).then(j).then(k).catch(x)}function N(e,t){window.open(v.get(O(e,t)))}t["a"]={ServerUrl:v,Options:m,Headers:y,Body:w,StatusHandler:D,ResultHandler:_,get:C,getJSON:$,post:P,postForm:E,postJSON:S,put:T,remove:B,download:N}},"8b32":function(e,t,n){},9623:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("a026"),o=(n("42a1"),n("b3f5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login_page"},[n("h1",{staticClass:"top-title"},[e._v(" "+e._s(e.$t("login.registerTitle"))+" "),n("div",{staticClass:"locale-wrap"},[n("locale-select")],1)]),n("let-form",{ref:"form",attrs:{inline:"","label-position":"top",itemWidth:"440px"},nativeOn:{submit:function(t){return t.preventDefault(),e.register(t)}}},[n("let-form-item",{attrs:{label:e.$t("login.userName"),required:""}},[n("let-input",{attrs:{size:"small",required:"","required-tip":e.$t("login.userNameTips"),pattern:"^[a-zA-Z0-9_]+$","pattern-tip":e.$t("login.userNameRegTips")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.uid,callback:function(t){e.uid=t},expression:"uid"}})],1),n("let-form-item",{attrs:{label:e.$t("login.password"),required:""}},[n("let-input",{attrs:{type:"password",size:"small",required:"","required-tip":e.$t("login.passwordTips")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),n("let-form-item",{attrs:{label:e.$t("login.repeatPassword"),required:""}},[n("let-input",{attrs:{type:"password",size:"small",required:"","required-tip":e.$t("login.repeatPasswordTips")},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.repeatPassword,callback:function(t){e.repeatPassword=t},expression:"repeatPassword"}})],1),n("let-button",{attrs:{type:"submit",theme:"primary"}},[e._v(e._s(e.$t("login.register")))]),n("let-button",{staticStyle:{float:"right","margin-right":"12px"},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.toLoginPage(t)}}},[e._v(e._s(e.$t("login.toLoginPage")))])],1)],1)}),a=[],i=(n("99af"),n("c975"),n("ac1f"),n("841c"),n("00b0")),u={name:"login_page",data:function(){return{uid:"",password:"",repeatPassword:""}},computed:{redirectUrl:function(){var e="redirect_url=",t=location.search.indexOf(e);return t>-1?decodeURIComponent(location.search.substring(t+e.length)):"/"}},components:{localeSelect:i["a"]},methods:{register:function(){var e=this;if(this.$refs.form.validate())if(this.checkRepeatPwdValid()){var t=this.$Loading.show();this.$ajax.postJSON("/api/register",{uid:this.uid,password:this.password,repeat_password:this.repeatPassword}).then((function(n){t.hide(),e.$tip.success("".concat(e.$t("login.registerSucc"))),setTimeout((function(){e.toLoginPage()}),1e3)})).catch((function(n){t.hide(),e.$tip.error("".concat(e.$t("login.registerFailed"),": ").concat(n.err_msg||n.message))}))}else this.$tip.error("".concat(this.$t("login.passwordDiff")))},checkRepeatPwdValid:function(){return this.repeatPassword===this.password},toLoginPage:function(){location.href="/login.html?redirect_url="+encodeURIComponent(this.redirectUrl)}}},c=u,l=(n("d4ea"),n("2877")),s=Object(l["a"])(c,o,a,!1,null,null,null),f=s.exports,d=n("f51c");r["default"].config.productionTip=!1,d["b"].call(void 0).then((function(){new r["default"]({el:"#register-app",i18n:d["a"],components:{register:f},template:"<register/>"})}))},a4e9:function(e,t,n){},b3f5:function(e,t,n){"use strict";n("99af"),n("4160"),n("6d93");var r=n("a026"),o=n("7ad2");o["a"].ResultHandler.set((function(e){return!(!e||200!==e.ret_code||null==e.data)})),["getJSON","postJSON"].forEach((function(e){var t=o["a"][e];o["a"]["_".concat(e)]=t,o["a"][e]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.call.apply(t,[null].concat(n)).then((function(e){return e.data}))}})),Object.defineProperty(r["default"].prototype,"$ajax",{get:function(){return o["a"]}})},d4ea:function(e,t,n){"use strict";var r=n("12ce"),o=n.n(r);o.a},e166:function(e,t,n){"use strict";var r=n("8b32"),o=n.n(r);o.a},f51c:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s}));n("d3b7"),n("25f0");var r=n("a026"),o=n("a925"),a=n("00e7"),i=n.n(a),u=n("7ad2");r["default"].use(o["a"]),r["default"].use(i.a);var c=new o["a"]({}),l=[];function s(){return new Promise((function(e,t){u["a"].getJSON("/api/get_locale").then((function(t){var n=i.a.get("locale");if("[object Object]"==Object.prototype.toString.call(t)){for(var r in t)c.setLocaleMessage(r,t[r]),l.push({localeCode:r,localeName:t[r]["localeName"],localeMessages:t});n=t[n]?n:"cn",l=t}c.locale=n,e()})).catch((function(e){t(e)}))}))}}});